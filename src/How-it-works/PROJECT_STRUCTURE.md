# الهيكل التفصيلي لملفات ومجلدات مشروع "المائدة"

هذه الوثيقة تشرح بالتفصيل بنية المشروع، والغرض من كل مجلد وملف رئيسي، لتسهيل عملية التطوير والفهم لأي عضو في الفريق.

---

### الهيكل العام (Root Directory)

```
.
├── /src
│   ├── /app
│   ├── /components
│   ├── /hooks
│   ├── /lib
│   ├── /ai
│   └── /types
├── package.json
├── next.config.ts
├── tailwind.config.ts
├── tsconfig.json
└── README.md
```

---

### 1. مجلد `src`

هو المجلد الرئيسي الذي يحتوي على كل الكود المصدري للتطبيق.

#### 1.1. `src/app`
هذا هو قلب تطبيق Next.js باستخدام (App Router). كل مجلد داخل `app` يمثل مساراً (route) في التطبيق.

*   **`/` (page.tsx):** الصفحة الرئيسية (لوحة التحكم للمدير).
*   **`/chef` (page.tsx):** واجهة الشيف لإدارة الطلبات.
*   **`/menu/[uuid]` (page.tsx):** صفحة قائمة الطعام الرقمية للزبون.
*   **`layout.tsx`:** الهيكل العام للصفحات (Layout)، يحتوي على الشريط الجانبي والتصميم المشترك.
*   **`globals.css`:** ملف الأنماط (CSS) العام للمشروع.
*   **`/api/v1/...`:** مجلدات تحتوي على مسارات الواجهة الخلفية (API Routes) التي تتفاعل مع Supabase وتخدم عمليات المزامنة.

#### 1.2. `src/components`
يحتوي على جميع مكونات React القابلة لإعادة الاستخدام.

*   **`/ui`:** يحتوي على المكونات الأساسية والجاهزة من مكتبة **ShadCN UI**.
*   **`auth-guard.tsx`:** **جديد:** مكون حماية المسارات الذي يضمن أن المستخدمين المصرح لهم فقط يمكنهم الوصول للصفحات.
*   **`/dashboard`:** مكونات مخصصة للوحة التحكم الرئيسية.
*   **`/chef`:** مكونات خاصة بواجهة الشيف.
*   **`app-content.tsx`:** مكون رئيسي يجمع بين الشريط الجانبي ومحتوى الصفحة.

#### 1.3. `src/hooks`
يحتوي على "الخطافات" (Hooks) المخصصة في React، وهي أساس منطق الواجهة الأمامية.

*   **`use-auth.tsx`:** خطاف لإدارة حالة المصادقة (تسجيل الدخول والخروج).
*   **`use-order-flow.tsx`:** **الأهم على الإطلاق:** العقل المدبر لتدفق الطلبات. يدير الحالة من `useState`، ويتصل بـ `Supabase Realtime`، ويقرأ ويكتب في `IndexedDB`، ويدير قائمة انتظار المزامنة.
*   **`use-toast.ts`:** خطاف لإظهار إشعارات مؤقتة (Toasts).

#### 1.4. `src/lib`
يحتوي على الدوال المساعدة والأدوات.

*   **`supabase.ts`:** لتهيئة عميل Supabase للواجهة الأمامية.
*   **`supabase-admin.ts`:** لتهيئة عميل Supabase للواجهة الخلفية (مع صلاحيات كاملة).
*   **`indexeddb.ts`:** **جديد:** ملف تهيئة Dexie.js وإدارة قاعدة بيانات IndexedDB المحلية (الجداول، دوال الجلب والحفظ).
*   **`utils.ts`:** يحتوي على دوال مساعدة عامة.

#### 1.5. `src/ai`
المجلد المخصص لكل ما يتعلق بالذكاء الاصطناعي باستخدام **Genkit**.

*   **`genkit.ts`:** ملف تهيئة وإعداد Genkit.
*   **`/flows`:** يحتوي على الـ Flows التي تنفذ مهام الذكاء الاصطناعي.

#### 1.6. `src/types`
يحتوي على تعريفات **TypeScript** للبيانات المستخدمة في المشروع.

*   **`index.ts`:** ملف مركزي لتعريف كل الأنواع (Types) مثل `Table`, `Order`, `MenuItem`, `PendingSyncOperation`... هذا هو "المصدر الوحيد للحقيقة" لبنية بياناتنا.

---

### 2. مجلد `public`

يحتوي على الملفات الثابتة التي يمكن الوصول إليها مباشرة عبر الرابط.

---

### 3. ملفات الإعدادات الرئيسية (Root Files)

*   **`package.json`:** يسرد جميع المكتبات التي يعتمد عليها المشروع (مثل `dexie`).
*   **`next.config.ts`:** ملف إعدادات Next.js.
*   **`tailwind.config.ts`:** ملف إعدادات Tailwind CSS.
*   **`tsconfig.json`:** ملف إعدادات TypeScript.
---
