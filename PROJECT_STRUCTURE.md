# الهيكل التفصيلي لملفات ومجلدات مشروع "المائدة"

هذه الوثيقة تشرح بالتفصيل بنية المشروع، والغرض من كل مجلد وملف رئيسي، لتسهيل عملية التطوير والفهم لأي عضو في الفريق.

---

### الهيكل العام (Root Directory)

```
.
├── /src
│   ├── /app
│   ├── /components
│   ├── /hooks
│   ├── /lib
│   ├── /ai
│   └── /types
├── /public
├── package.json
├── next.config.ts
├── tailwind.config.ts
├── tsconfig.json
└── README.md
```

---

### 1. مجلد `src`

هو المجلد الرئيسي الذي يحتوي على كل الكود المصدري للتطبيق.

#### 1.1. `src/app`
هذا هو قلب تطبيق Next.js باستخدام (App Router). كل مجلد داخل `app` يمثل مساراً (route) في التطبيق.

*   **`/` (page.tsx):** الصفحة الرئيسية (لوحة التحكم للمدير). تعرض حالة الطاولات وتسمح بتأكيد الطلبات.
*   **`/chef` (page.tsx):** واجهة الشيف لإدارة الطلبات، مقسمة إلى "طلبات بانتظار الموافقة" و "طلبات قيد التحضير".
*   **`/expenses` (page.tsx):** صفحة إدارة المصاريف، تحتوي على جدول لعرض المصاريف وفلاتر للبحث.
*   **`/menu/[uuid]` (page.tsx):** صفحة قائمة الطعام الرقمية للزبون. هذا مسار ديناميكي آمن يستخدم **معرفاً فريداً (UUID)** لكل طاولة بدلاً من رقمها المتسلسل، لمنع أي محاولة للتلاعب بالرابط أو تخمينه.
*   **`/menu-management` (page.tsx):** واجهة المدير لإدارة أصناف القائمة.
*   **`/pos` (page.tsx):** صفحة نقطة البيع السريعة للطلبات الخارجية.
*   **`/reports` (page.tsx):** صفحة التقارير التحليلية، تحتوي على رسوم بيانية وجداول.
*   **`/settings` (page.tsx):** صفحة الإعدادات العامة، إدارة المستخدمين، ومولد رموز QR.
*   **`layout.tsx`:** الهيكل العام للصفحات (Layout)، يحتوي على الشريط الجانبي والتصميم المشترك.
*   **`globals.css`:** ملف الأنماط (CSS) العام للمشروع، ويحتوي على متغيرات ألوان السمات (Themes) الخاصة بـ Tailwind.

#### 1.2. `src/components`
يحتوي على جميع مكونات React القابلة لإعادة الاستخدام.

*   **`/ui`:** يحتوي على المكونات الأساسية والجاهزة من مكتبة **ShadCN UI** (مثل Button, Card, Table...). هذه المكونات هي لبنات البناء الأساسية لواجهتنا.
*   **`/dashboard`:** مكونات مخصصة فقط للوحة التحكم الرئيسية (مثل `table-card.tsx`, `order-details-sheet.tsx`).
*   **`/chef`:** مكونات خاصة بواجهة الشيف (مثل `chef-order-card.tsx`, `chef-order-column.tsx`).
*   **`/settings`:** مكونات خاصة بصفحة الإعدادات (مثل `qr-code-generator.tsx`, `user-management.tsx`).
*   **`app-content.tsx`:** مكون رئيسي يجمع بين الشريط الجانبي ومحتوى الصفحة.
*   **`language-toggle.tsx`:** مكون زر تبديل اللغة.
*   **`theme-toggle.tsx`:** مكون زر تبديل المظهر (ليلي/نهاري).
*   **`icons.tsx`:** ملف يحتوي على أيقونات SVG مخصصة للمشروع.

#### 1.3. `src/hooks`
يحتوي على "الخطافات" (Hooks) المخصصة في React، وهي أساس منطق الواجهة الأمامية.

*   **`use-language.tsx`:** خطاف لإدارة حالة اللغة (عربي/إنجليزي) على مستوى التطبيق.
*   **`use-auth.tsx`:** خطاف لإدارة حالة المصادقة (تسجيل الدخول والخروج).
*   **`use-restaurant-settings.tsx`:** خطاف لإدارة الإعدادات العامة للمطعم (الاسم، عدد الطاولات...).
*   **`use-order-flow.tsx`:** **أهم خطاف في التطبيق**، وهو العقل المدبر لتدفق تأكيد الطلبات متعدد المستويات. يدير حالة جميع الطلبات والطاولات ويوفر دوال لتحديثها، مما يضمن التزامن بين جميع الواجهات.
*   **`use-mobile.tsx`:** خطاف لمعرفة ما إذا كان المستخدم يتصفح من جهاز جوال.
*   **`use-toast.ts`:** خطاف لإظهار إشعارات مؤقتة (Toasts).

#### 1.4. `src/lib`
يحتوي على الدوال المساعدة والأدوات.

*   **`utils.ts`:** يحتوي على دوال مساعدة عامة، وأهمها دالة `cn` التي تدمج بين فئات Tailwind CSS وفئات أخرى بشكل ذكي.

#### 1.5. `src/ai`
المجلد المخصص لكل ما يتعلق بالذكاء الاصطناعي باستخدام **Genkit**.

*   **`genkit.ts`:** ملف تهيئة وإعداد Genkit.
*   **`/flows`:** يحتوي على الـ Flows (مثل `exchange-rate-flow.ts` لجلب سعر الصرف).

#### 1.6. `src/types`
يحتوي على تعريفات **TypeScript** للبيانات المستخدمة في المشروع.

*   **`index.ts`:** ملف مركزي لتعريف كل الأنواع (Types) مثل `Table`, `Order`, `MenuItem`... مما يضمن أن البيانات متناسقة في جميع أنحاء التطبيق. لقد تم تحديث الأنواع لتشمل الحالات الجديدة لتدفق الطلبات.

---

### 2. مجلد `public`

يحتوي على الملفات الثابتة التي يمكن الوصول إليها مباشرة عبر الرابط، مثل الصور، الأيقونات (favicon)، أو الخطوط.

---

### 3. ملفات الإعدادات الرئيسية (Root Files)

*   **`package.json`:** يسرد جميع المكتبات والحزم التي يعتمد عليها المشروع، بالإضافة إلى الأوامر (scripts) مثل `dev`, `build`.
*   **`next.config.ts`:** ملف إعدادات Next.js.
*   **`tailwind.config.ts`:** ملف إعدادات Tailwind CSS, حيث يتم تعريف السمات المخصصة والألوان والخطوط.
*   **`tsconfig.json`:** ملف إعدادات TypeScript.
*   **`README.md`:** وثيقة تعريفية بالمشروع (نظرة سريعة).
---
